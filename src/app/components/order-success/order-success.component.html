<div class="order-success-container">
  <div class="success-card" *ngIf="!loading && order">
    <!-- Success Icon -->
    <div class="success-icon">
      <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
        <circle cx="40" cy="40" r="40" fill="#4CAF50"/>
        <path d="M25 40L35 50L55 30" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </div>

    <!-- Success Message -->
    <h1>Order Placed Successfully!</h1>
    <p class="thank-you">Thank you for your purchase</p>

    <!-- Demo Notice -->
    <div class="demo-notice" *ngIf="isDemo">
      <strong>‚ö†Ô∏è Demo Mode</strong>
      <p>This is a demonstration order. No actual payment was processed.</p>
      <p>In production, Stripe would handle payment processing securely.</p>
    </div>

    <!-- Order Details -->
    <div class="order-details">
      <div class="detail-row">
        <span class="label">Order Number:</span>
        <span class="value">{{ order.id }}</span>
      </div>
      <div class="detail-row">
        <span class="label">Order Date:</span>
        <span class="value">{{ order.createdAt | date:'medium' }}</span>
      </div>
      <div class="detail-row">
        <span class="label">Email:</span>
        <span class="value">{{ order.userEmail }}</span>
      </div>
      <div class="detail-row">
        <span class="label">Total Amount:</span>
        <span class="value total">${{ order.total.toFixed(2) }}</span>
      </div>
      <div class="detail-row">
        <span class="label">Payment Status:</span>
        <span class="value status" [class.paid]="order.paymentStatus === 'paid'">
          {{ order.paymentStatus | titlecase }}
        </span>
      </div>
    </div>

    <!-- Order Summary -->
    <div class="order-summary">
      <h3>Order Summary</h3>
      <div class="items-list">
        <div class="item" *ngFor="let item of order.items">
          <img [src]="item.productImage" [alt]="item.productName">
          <div class="item-details">
            <h4>{{ item.productName }}</h4>
            <p>Quantity: {{ item.quantity }} √ó ${{ item.price.toFixed(2) }}</p>
          </div>
          <div class="item-total">
            ${{ item.subtotal.toFixed(2) }}
          </div>
        </div>
      </div>

      <div class="totals">
        <div class="total-row">
          <span>Subtotal:</span>
          <span>${{ order.subtotal.toFixed(2) }}</span>
        </div>
        <div class="total-row">
          <span>Shipping:</span>
          <span>${{ order.shipping.toFixed(2) }}</span>
        </div>
        <div class="total-row">
          <span>Tax:</span>
          <span>${{ order.tax.toFixed(2) }}</span>
        </div>
        <div class="total-row grand-total">
          <span>Total:</span>
          <span>${{ order.total.toFixed(2) }}</span>
        </div>
      </div>
    </div>

    <!-- Shipping Address -->
    <div class="address-section">
      <h3>Shipping Address</h3>
      <p>{{ order.shippingAddress.street }}</p>
      <p>{{ order.shippingAddress.city }}, {{ order.shippingAddress.state }} {{ order.shippingAddress.zipCode }}</p>
      <p>{{ order.shippingAddress.country }}</p>
    </div>

    <!-- Next Steps -->
    <div class="next-steps">
      <h3>What's Next?</h3>
      <ul>
        <li>‚úâÔ∏è You will receive an order confirmation email shortly</li>
        <li>üì¶ We'll send you a shipping notification when your order ships</li>
        <li>üöö Estimated delivery: 3-5 business days</li>
      </ul>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button class="btn-primary" (click)="continueShopping()">Continue Shopping</button>
      <button class="btn-secondary" (click)="viewOrderHistory()">View Order History</button>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading" *ngIf="loading">
    <p>Loading order details...</p>
  </div>

  <!-- Error State -->
  <div class="error-card" *ngIf="!loading && !order">
    <h2>Order Not Found</h2>
    <p>We couldn't find the order you're looking for.</p>
    <button class="btn-primary" (click)="continueShopping()">Return to Shop</button>
  </div>
</div>
