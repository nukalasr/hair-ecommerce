<div class="container">
  <h2 class="page-title">Shopping Cart</h2>

  <div *ngIf="cart.items.length === 0" class="empty-cart">
    <p>Your cart is empty</p>
    <a routerLink="/" class="btn btn-primary">Continue Shopping</a>
  </div>

  <div *ngIf="cart.items.length > 0" class="cart-content">
    <div class="cart-items">
      <div *ngFor="let item of cart.items" class="cart-item card">
        <img [src]="item.product.imageUrl" [alt]="item.product.name" class="item-image">

        <div class="item-info">
          <h3>{{ item.product.name }}</h3>
          <p class="item-description">{{ item.product.description }}</p>
          <div class="item-details">
            <span class="detail-badge">{{ item.product.origin }}</span>
            <span class="detail-badge">{{ item.product.length }}"</span>
            <span class="detail-badge">{{ item.product.texture }}</span>
          </div>
        </div>

        <div class="item-quantity">
          <label>Quantity:</label>
          <div class="quantity-controls">
            <button
              (click)="updateQuantity(item.product.id, item.quantity - 1)"
              class="btn btn-secondary"
              [disabled]="item.quantity <= 1">
              -
            </button>
            <input
              type="number"
              [value]="item.quantity"
              (change)="updateQuantity(item.product.id, +$any($event.target).value)"
              [max]="item.product.stock"
              [min]="1"
              readonly>
            <button
              (click)="updateQuantity(item.product.id, item.quantity + 1)"
              class="btn btn-secondary"
              [disabled]="item.quantity >= item.product.stock">
              +
            </button>
          </div>
        </div>

        <div class="item-price">
          <div class="unit-price">${{ item.product.price.toFixed(2) }} each</div>
          <div class="subtotal">${{ getItemSubtotal(item).toFixed(2) }}</div>
        </div>

        <button (click)="removeItem(item.product.id)" class="btn-remove">âœ•</button>
      </div>
    </div>

    <div class="cart-summary card">
      <h3>Order Summary</h3>

      <div class="summary-row">
        <span>Subtotal ({{ cart.totalItems }} items):</span>
        <span>${{ cart.totalPrice.toFixed(2) }}</span>
      </div>

      <div class="summary-row">
        <span>Shipping:</span>
        <span>Calculated at checkout</span>
      </div>

      <div class="summary-row">
        <span>Tax:</span>
        <span>Calculated at checkout</span>
      </div>

      <div class="summary-divider"></div>

      <div class="summary-row total">
        <span>Estimated Total:</span>
        <span>${{ cart.totalPrice.toFixed(2) }}</span>
      </div>

      <div class="summary-actions">
        <a routerLink="/checkout" class="btn btn-primary full-width">Proceed to Checkout</a>
        <a routerLink="/" class="btn btn-secondary full-width">Continue Shopping</a>
        <button (click)="clearCart()" class="btn btn-secondary full-width">Clear Cart</button>
      </div>
    </div>
  </div>
</div>
